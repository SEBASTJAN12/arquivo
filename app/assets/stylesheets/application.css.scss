@import '@primer/css/index.scss';
@import 'simple_calendar';
// https://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives
@import '**/*';


.pagehead {
    position: relative;
    // margin-bottom: 24px; // default value but its kind of big
    margin-bottom: 18px;
    border-bottom: 1px solid #e1e4e8;
}


.content-container {
  @extend .float-left;
  // this is very hard to reason about and yet every time i touch this
  // i manage to not document how this works. my basic intuition is as follows:
  // you define the smallest sets first which are then overrided byâ€¦ larger
  // breakpoints?
  // answer: gotta define the sizes in all the diff breakpoints
  // @extend .col-sm-11, .mx-sm-4;
  @extend .col-sm-11;
  @extend .col-md-8;
  @extend .col-lg-6;
  @extend .mb-lg-4;

  @include breakpoint(sm) {
    margin-right: $spacer-4;
    margin-left: $spacer-4;
  }

  @include breakpoint(md) {
    margin-right: $spacer-0;
    margin-left: $spacer-0;
  }

  max-width: 100%;
}

.sidebar-container {
  @extend .float-left;
  @extend .col-md-3;
  @extend .col-lg-2;
  @extend .hide-sm, .hide-md;

  @include breakpoint(md) {
    margin-left: $spacer-4;
  }

  @include breakpoint(xl) {
    margin-left: $spacer-0;
    margin-right: $spacer-0;
  }

  // notebook selector
  .SelectMenu-modal {
    width: 100%;
    border: none;
    // border-radius: unset;
    // box-shadow: unset;
    // background: unset;
    .SelectMenu-list {
      // padding-top is to prevent the thick 'item selected' border
      // from being cropped by the parent SelectMenu-modal (?) (not totally sure)
      padding-top: 4px;
      padding-right: 1em;
      padding-left: 0.5em;
      padding-bottom: 4px;
      border-top: unset;
      overflow-x: unset;
    }
  }
}

.context-container {
  @extend .float-left;
  @extend .col-lg-3;
  @extend .col-xl-3;
  @include breakpoint(lg) {
    padding-left: $spacer-8;
  }
  @extend .hide-sm, .hide-md;
}


.calendar-container {
  @extend .float-left;
  @extend .col-sm-11;
  @extend .col-md-8;
  @extend .col-lg-9;
  @extend .mb-lg-4;

  @include breakpoint(sm) {
    margin-right: $spacer-4;
    margin-left: $spacer-4;
  }

  @include breakpoint(md) {
    margin-right: $spacer-0;
    margin-left: $spacer-0;
  }
}

// settings
.settings-toc {
  @extend .h3;
  padding-left: 1em !important;
}

// used for rendering entry bodies
.entry-box {
  @extend .Box;
  .markdown-body img {
    width: 100%;
  }
  // experimenting with removing the box borders begin HAX
  // border-right: 0px;
  // border-left: 0px;
  // border-bottom: 0px;
  // border-bottom-left-radius: 0px;
  // border-top-right-radius: 0px;
  // border-top-left-radius: 0px;
  // .Box-body {
  //   border-bottom: unset;
  // }
  // end HAX
}

// unused
// .entry-edit {
//   padding-top: 12px;
//   padding-right: 12px;
//   padding-bottom: 12px;
//   padding-left: 16px;
//   margin-top: -1px;
//   border-top: 1px solid #e1e4e8;
// }

.entry-box + .entry-box {
  @extend .mt-2;
}

.entry-box + .entry-threaded, .entry-threaded + .entry-box {
  // margin-top: 0px !important; // HAX turned off
  border-top: 1px solid #e1e4e8 !important; // HAX added
  // border-top: 0px; // HAX turned off
  border-top-left-radius: 0px;
  border-top-right-radius: 0px;
}
//
// .entry-box + .entry-show {
//   border: 1px solid $gray-400 !important;
//   border-top-left-radius: 2px !important;
//   border-top-right-radius: 2px !important;
// }

.TimelineItem-start {
  @extend .TimelineItem-break;
  border: none;
}

summary::marker {
  padding-bottom: 4px;
}

summary::-webkit-details-marker {
  padding-bottom: 4px;
}

.entry-list-header {
  @extend .text-small;
  @extend .mb-3;

  @extend .text-gray-dark;
  // HAX
  border-bottom: 1px solid #e1e4e8;
  padding-bottom: 16px;
}

// prevent controls (edit, fold, etc) from appearing when selecting text
.unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


// https://stackoverflow.com/a/17030071
// TODO: find a better name, css-truncate is used in primer
.truncate {
  overflow: hidden;
  position: relative;
  max-height: 300px;

  // used for action bar
  .show-on-fold {
    display: initial;
  }

  .hide-on-fold {
    display: none;
  }

  // used for show-all-content toggle
  .show-all-toggle {
    display: block;
    position:absolute;
    width: 100%;
    height: 3em;
    bottom: 0em;
    background-color:white;
    p {
      width: fit-content;
      cursor: pointer;
      margin-top: 0.5em;
    }
  }
}

.truncate.truncate-more {
  max-height: 180px;
}


.show-on-fold {
  display: none;
}

.show-all-toggle {
  display: none;
}

// end truncate

// .truncate:after{
//   content:"";
//   height: 75px;
//   display: block;
//   width: 100%;
//   position:absolute;
//
//   background: linear-gradient(transparent, white);
//
//   background-color:white;
//   opacity: 0.8;
//   bottom: -0.3em
// }


// for displaying the hide button only on hover
.hide-calendar {
  display: inline;
  visibility: hidden;
  opacity: 0.0;
  -webkit-transition: all 200ms ease-in-out;
  -moz-transition: all 200ms ease-in-out;
  -ms-transition: all 200ms ease-in-out;
  -o-transition: all 200ms ease-in-out;
  transition: all 200ms ease-in-out;
}

.calendar-entry:hover .hide-calendar {
  visibility: visible;
  opacity: 1.0;
  display: inline;
}

// override dark grey in calendar view
table.weekly {
  table-layout: fixed;
  .next-month, .prev-month {
    background-color: #F2F2F2;
    &.today {
      background-color: #FFFFC0 // commented out for now.
    }
  }

  td {
    padding: 0;
    overflow: hidden;
    background-color: #F2F2F2;
    .weekly-entry {
      padding: 6px;
      background-color: white;
      border-bottom: 1px solid #dfe2e5;
      padding-bottom: 15px;
    }
  }
}

table.monthly {
  table-layout: fixed;
  background-color: #F2F2F2;
  td.has-events {
    background-color: white;
  }
}

// brand
h1.arquivo {
  font-size: 42px;
  a {
    text-decoration: underline black;
    &:hover {
      text-decoration: underline $blue-500;
    }
  }
}

.black-underline {
  text-decoration: underline black;
  &:hover {
    text-decoration: underline $blue-500;
  }
}

// HAX
// the h1, h2 has a border bottom that is a bit excessive
.markdown-body h1, .markdown-body h2 {
  border-bottom: 0;
  padding-bottom: 0;
}



/////////

// largely mimics content-container
.static_pls.nav-header-container {
  @extend .float-left;
  @extend .col-sm-11;
  @extend .col-md-8;
  // here we deviate & make it longer than the content-container to force the
  // adjacent over sidebar-container to go on the next block
  @extend .col-lg-9;
  // @extend .mb-lg-2;

  @include breakpoint(sm) {
    margin-right: $spacer-4;
    margin-left: $spacer-4;
  }

  @include breakpoint(md) {
    margin-right: $spacer-0;
    margin-left: $spacer-0;
  }

  // match padding in entry-box
  @include breakpoint(lg) {
    padding-left: 0;
  }


  // match padding in entry-box
  padding-left: 16px;
  max-width: 100%;

  .nav-header {
    display: flex;
    align-items: center;

    ul {
      display: flex;
      li {
        @extend .mr-4;
      }
    }
  }

  // scale down brand
  h1.arquivo {
    font-size: 30px;
  }
}

.static_pls.entry-box {
  // let's drop the Box borders
  border: 0px;

  .entry-subject {
    h1, h2 {
      margin-top: $spacer-3;
      margin-bottom: $spacer-1;
    }
  }

  .Box-body {
    // given we're no longer drawin the Box borders, having padding looks off
    // in the larger screen sizes.
    @include breakpoint(lg) {
      padding: 0;
    }

    // reduce whitespace between subject and brand header
    padding-top: 0;
  }

  .action-bar {
    @extend .text-small;
    @extend .mb-3;

    @extend .text-gray-dark;
    // HAX
    // border-bottom: 1px solid #e1e4e8;
    padding-bottom: 8px;

  }
}
