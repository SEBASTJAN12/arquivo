{"ast":null,"code":"document.addEventListener(\"turbolinks:load\", function () {\n  document.querySelectorAll('.show-on-fold').forEach(function (elem) {\n    elem.addEventListener(\"click\", function (e) {\n      e.preventDefault();\n      this.closest(\".Box-body\") && this.closest(\".Box-body\").classList.remove(\"truncate\");\n      this.closest(\"entry-container\") && this.closest(\"entry-container\").classList.remove(\"truncate\");\n    });\n  });\n  document.querySelectorAll('.hide-on-fold').forEach(function (elem) {\n    elem.addEventListener(\"click\", function (e) {\n      e.preventDefault();\n      this.closest(\".Box-body\") && this.closest(\".Box-body\").classList.add(\"truncate\");\n      this.closest(\"entry-container\") && this.closest(\"entry-container\").classList.add(\"truncate\");\n    });\n  });\n\n  // click anywhere in the entry to remove truncate\n  document.addEventListener(\"click\", function (e) {\n    var elem = e.target;\n    var entry_body;\n    if (!elem.matches(\".hide-on-fold\") && (entry_body = elem.closest(\".Box-body\"))) {\n      entry_body.classList.remove(\"truncate\");\n    }\n    if (!elem.matches(\".hide-on-fold\") && (entry_body = elem.closest(\"entry-container\"))) {\n      entry_body.classList.remove(\"truncate\");\n    }\n\n    // TODO: .collapsed is probably deprecated?\n    if (elem.closest(\".collapsed\")) {\n      elem.closest(\".Box-body\") && elem.closest(\".Box-body\").classList.remove(\"collapsed\");\n    }\n  });\n});\n\n/* Commented out double click handler, might want to use this later?\ndocument.addEventListener('dblclick', (e) => {\n  var elem = e.target;\n  var entry_body;\n  if(!elem.matches(\".show-on-fold\") && (entry_body = elem.closest(\".Box-body\"))) {\n    entry_body.classList.add(\"truncate\");\n\n    if (!isScrolledIntoView(entry_body)) {\n      entry_body.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n        inline: \"nearest\"\n      });\n    }\n  }\n});\n\n// used to figure out if top of element is visible\nfunction isScrolledIntoView(el) {\n    var rect = el.getBoundingClientRect();\n    var elemTop = rect.top;\n    var elemBottom = rect.bottom;\n\n    // Only completely visible elements return true:\n    var isVisible = (elemTop >= 0) && (elemBottom <= window.innerHeight);\n    // Partially visible elements return true:\n    //isVisible = elemTop < window.innerHeight && elemBottom >= 0;\n    return isVisible;\n}\n\n\n*/","map":{"version":3,"names":["document","addEventListener","querySelectorAll","forEach","elem","e","preventDefault","closest","classList","remove","add","target","entry_body","matches"],"sources":["/Users/phillmv/code/archive/app/javascript/entry_folding.js"],"sourcesContent":["document.addEventListener(\"turbolinks:load\", function(){\n  document.querySelectorAll('.show-on-fold').forEach(function(elem) {\n    elem.addEventListener(\"click\", function(e) {\n      e.preventDefault();\n      this.closest(\".Box-body\") && this.closest(\".Box-body\").classList.remove(\"truncate\");\n      this.closest(\"entry-container\") && this.closest(\"entry-container\").classList.remove(\"truncate\");\n    })\n  });\n\n  document.querySelectorAll('.hide-on-fold').forEach(function(elem) {\n    elem.addEventListener(\"click\", function(e) {\n      e.preventDefault();\n      this.closest(\".Box-body\") && this.closest(\".Box-body\").classList.add(\"truncate\");\n      this.closest(\"entry-container\") && this.closest(\"entry-container\").classList.add(\"truncate\");\n    })\n  });\n\n  // click anywhere in the entry to remove truncate\n  document.addEventListener(\"click\", (e) => {\n    var elem = e.target;\n    var entry_body;\n    if(!elem.matches(\".hide-on-fold\") && (entry_body = elem.closest(\".Box-body\"))) {\n      entry_body.classList.remove(\"truncate\");\n    }\n\n    if(!elem.matches(\".hide-on-fold\") && (entry_body = elem.closest(\"entry-container\"))) {\n      entry_body.classList.remove(\"truncate\");\n    }\n\n\n    // TODO: .collapsed is probably deprecated?\n    if(elem.closest(\".collapsed\")){\n      elem.closest(\".Box-body\") && elem.closest(\".Box-body\").classList.remove(\"collapsed\");\n    }\n  });\n});\n\n\n/* Commented out double click handler, might want to use this later?\ndocument.addEventListener('dblclick', (e) => {\n  var elem = e.target;\n  var entry_body;\n  if(!elem.matches(\".show-on-fold\") && (entry_body = elem.closest(\".Box-body\"))) {\n    entry_body.classList.add(\"truncate\");\n\n    if (!isScrolledIntoView(entry_body)) {\n      entry_body.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n        inline: \"nearest\"\n      });\n    }\n  }\n});\n\n// used to figure out if top of element is visible\nfunction isScrolledIntoView(el) {\n    var rect = el.getBoundingClientRect();\n    var elemTop = rect.top;\n    var elemBottom = rect.bottom;\n\n    // Only completely visible elements return true:\n    var isVisible = (elemTop >= 0) && (elemBottom <= window.innerHeight);\n    // Partially visible elements return true:\n    //isVisible = elemTop < window.innerHeight && elemBottom >= 0;\n    return isVisible;\n}\n\n\n*/\n"],"mappings":"AAAAA,QAAQ,CAACC,gBAAgB,CAAC,iBAAiB,EAAE,YAAU;EACrDD,QAAQ,CAACE,gBAAgB,CAAC,eAAe,CAAC,CAACC,OAAO,CAAC,UAASC,IAAI,EAAE;IAChEA,IAAI,CAACH,gBAAgB,CAAC,OAAO,EAAE,UAASI,CAAC,EAAE;MACzCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,IAAI,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI,CAACA,OAAO,CAAC,WAAW,CAAC,CAACC,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;MACnF,IAAI,CAACF,OAAO,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAACA,OAAO,CAAC,iBAAiB,CAAC,CAACC,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;IACjG,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFT,QAAQ,CAACE,gBAAgB,CAAC,eAAe,CAAC,CAACC,OAAO,CAAC,UAASC,IAAI,EAAE;IAChEA,IAAI,CAACH,gBAAgB,CAAC,OAAO,EAAE,UAASI,CAAC,EAAE;MACzCA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,IAAI,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI,CAACA,OAAO,CAAC,WAAW,CAAC,CAACC,SAAS,CAACE,GAAG,CAAC,UAAU,CAAC;MAChF,IAAI,CAACH,OAAO,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAACA,OAAO,CAAC,iBAAiB,CAAC,CAACC,SAAS,CAACE,GAAG,CAAC,UAAU,CAAC;IAC9F,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACAV,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAE,UAACI,CAAC,EAAK;IACxC,IAAID,IAAI,GAAGC,CAAC,CAACM,MAAM;IACnB,IAAIC,UAAU;IACd,IAAG,CAACR,IAAI,CAACS,OAAO,CAAC,eAAe,CAAC,KAAKD,UAAU,GAAGR,IAAI,CAACG,OAAO,CAAC,WAAW,CAAC,CAAC,EAAE;MAC7EK,UAAU,CAACJ,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;IACzC;IAEA,IAAG,CAACL,IAAI,CAACS,OAAO,CAAC,eAAe,CAAC,KAAKD,UAAU,GAAGR,IAAI,CAACG,OAAO,CAAC,iBAAiB,CAAC,CAAC,EAAE;MACnFK,UAAU,CAACJ,SAAS,CAACC,MAAM,CAAC,UAAU,CAAC;IACzC;;IAGA;IACA,IAAGL,IAAI,CAACG,OAAO,CAAC,YAAY,CAAC,EAAC;MAC5BH,IAAI,CAACG,OAAO,CAAC,WAAW,CAAC,IAAIH,IAAI,CAACG,OAAO,CAAC,WAAW,CAAC,CAACC,SAAS,CAACC,MAAM,CAAC,WAAW,CAAC;IACtF;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}